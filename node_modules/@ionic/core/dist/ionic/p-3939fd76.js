const e="opacity",o="translateX",t=e=>e.shadowRoot||e,n=(n,r,l)=>{const d="rtl"===r.ownerDocument.dir,a=d?"-99.5%":"99.5%",c=d?"33%":"-33%",s=l.enteringEl,m=l.leavingEl,i=new n;if(i.addElement(s).duration(l.duration||500).easing(l.easing||"cubic-bezier(0.36,0.66,0.04,1)").beforeRemoveClass("ion-page-invisible"),m&&r){const e=new n;e.addElement(r),i.add(e)}const f="back"===l.direction,u=s.querySelector(":scope > ion-content"),T=s.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),y=s.querySelectorAll(":scope > ion-header > ion-toolbar"),b=new n;if(u||0!==y.length||0!==T.length?(b.addElement(u),b.addElement(T)):b.addElement(s.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),i.add(b),f?b.beforeClearStyles([e]).fromTo(o,c,"0%",!0).fromTo(e,.8,1,!0):b.beforeClearStyles([e]).fromTo(o,a,"0%",!0),y.forEach(r=>{const l=new n;l.addElement(r),i.add(l);const s=new n;s.addElement(r.querySelector("ion-title"));const m=new n;m.addElement(r.querySelectorAll("ion-buttons,[menuToggle]"));const u=new n;u.addElement(r.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const T=new n;T.addElement(t(r).querySelector(".toolbar-background"));const y=new n,b=r.querySelector("ion-back-button");if(b&&y.addElement(b),l.add(s).add(m).add(u).add(T).add(y),s.fromTo(e,.01,1,!0),m.fromTo(e,.01,1,!0),u.fromTo(e,.01,1,!0),f)s.fromTo(o,c,"0%",!0),u.fromTo(o,c,"0%",!0),y.fromTo(e,.01,1,!0);else if(s.fromTo(o,a,"0%",!0),u.fromTo(o,a,"0%",!0),T.beforeClearStyles([e]).fromTo(e,.01,1,!0),y.fromTo(e,.01,1,!0),b){const e=new n;e.addElement(t(b).querySelector(".button-text")).fromTo(o,d?"-100px":"100px","0px"),l.add(e)}}),m){const r=new n;r.addElement(m.querySelector(":scope > ion-content")),r.addElement(m.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *")),i.add(r),f?r.beforeClearStyles([e]).fromTo(o,"0%",d?"-100%":"100%"):r.fromTo(o,"0%",c,!0).fromTo(e,1,.8,!0),m.querySelectorAll(":scope > ion-header > ion-toolbar").forEach(r=>{const l=new n;l.addElement(r);const a=new n;a.addElement(r.querySelector("ion-title"));const s=new n;s.addElement(r.querySelectorAll("ion-buttons,[menuToggle]"));const m=new n,u=r.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");u.length>0&&m.addElement(u);const T=new n;T.addElement(t(r).querySelector(".toolbar-background"));const y=new n,b=r.querySelector("ion-back-button");if(b&&y.addElement(b),l.add(a).add(s).add(m).add(y).add(T),i.add(l),y.fromTo(e,.99,0),a.fromTo(e,.99,0),s.fromTo(e,.99,0,0),m.fromTo(e,.99,0),f){if(a.fromTo(o,"0%",d?"-100%":"100%"),m.fromTo(o,"0%",d?"-100%":"100%"),T.beforeClearStyles([e]).fromTo(e,1,.01),b){const e=new n;e.addElement(t(b).querySelector(".button-text")),e.fromTo(o,"0%",(d?-124:124)+"px"),l.add(e)}}else a.fromTo(o,"0%",c).afterClearStyles(["transform"]),m.fromTo(o,"0%",c).afterClearStyles(["transform",e]),y.afterClearStyles([e]),a.afterClearStyles([e]),s.afterClearStyles([e])})}return Promise.resolve(i)};export{n as iosTransitionAnimation,t as shadow};